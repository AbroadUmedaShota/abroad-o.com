# 設計決定記録 (Architecture Decision Record)

このドキュメントは、プロジェクトのアーキテクチャに関する重要な決定を記録します。

---

## ADR-001: 日付ピッカーライブラリの導入

-   **ステータス:** 決定 (2025-07-22)
-   **決定者:** Gemini

### コンテキスト (背景)

-   アンケート一覧ページのフィルター機能において、ユーザーが期間（開始日・終了日）を指定するための日付入力UIが必要となった。
-   標準のHTML要素である `<input type="date">` を使用した場合、ブラウザ（Chrome, Safari, Firefoxなど）やOSによって表示されるカレンダーの見た目や操作性が異なり、一貫したユーザー体験を提供できないという課題があった。
-   また、ネイティブUIはアプリケーション全体のデザインテーマと乖離があり、ブランドイメージを損なう可能性があった。

### 決定 (何を決めたか)

-   標準の `<input type="date">` の使用を避け、JavaScriptベースのカスタム日付ピッカーライブラリ **`flatpickr`** を導入することを決定する。
-   `flatpickr` を利用して、アプリケーション全体で統一されたデザインと操作性を持つ日付ピッカーを提供する。

### 根拠 (なぜその決定をしたか)

-   **UI/UXの一貫性:** `flatpickr` を導入することで、全てのユーザーに同じデザインのカレンダーを提供でき、学習コストの低い、予測可能な操作性を実現できる。
-   **デザインの親和性:** スタイルをCSSで自由にカスタマイズできるため、アプリケーションのカラーテーマやデザインシステムに完全に統合できる。
-   **高機能:** 開始日と終了日の連動（期間範囲の制限）など、ネイティブ要素では実装が難しい高度な機能を容易に実現できる。
-   **軽量性:** `flatpickr` は多機能でありながら軽量で、パフォーマンスへの影響が比較的小さい。
-   **アクセシビリティ:** `flatpickr` はWAI-ARIA標準に準拠しており、スクリーンリーダーなどを使用するユーザーにも配慮されている。

### 結果 (決定による影響)

-   `index.html` に `flatpickr` のCSSとJSがCDN経由で追加された。
-   `src/main.js` に `flatpickr` の初期化ロジックが実装された。
-   `docs/02_CODING_STANDARDS.md` に `flatpickr` の標準的な利用方法が規約として追加された。
-   今後の開発で日付入力が必要な場合は、原則として `flatpickr` を使用する。

---

## ADR-002: セカンダリボタンの色彩改善

-   **ステータス:** 決定 (2025-07-23)
-   **決定者:** Gemini

### コンテキスト (背景)

-   ライトモードにおけるセカンダリボタン（例: 「キャンセル」ボタン、「フィルターをリセット」ボタンなど）の視認性が低いという課題があった。
-   従来の背景色 (`#BDBDBD`) が、画面全体の背景色 (`#FFFFFF`, `#F8F8F8`) とのコントラストが不足しており、ボタンの存在が認識しにくい状況であった。

### 決定 (何を決めたか)

-   ライトモードにおけるセカンダリボタンの背景色を、プライマリブランドカラー (`#4285F4`) の非常に薄い色合いである `#E0EDFF` に変更する。
-   これにより、セカンダリボタンの視認性を向上させつつ、その補助的な役割を維持する。

### 根拠 (なぜその決定をしたか)

-   **視認性の向上:** 白や薄いグレーの背景に対して、薄い青はより明確に区別され、ボタンの存在が際立つ。
-   **セカンダリ性の維持:** プライマリボタンの濃い青 (`#4285F4`) ほど強くないため、その補助的な役割は維持される。
-   **ブランドとの調和:** ブランドのプライマリカラーのトーンを使用することで、UI全体の一貫性が高まる。
-   **良好なコントラスト:** テキスト色 (`#1A1A1A`) とのコントラストも十分に確保され、可読性は維持される。

### 結果 (決定による影響)

-   `service-top-style.css` の `--color-button-secondary-bg` の値が `#E0EDFF` に変更された。
-   テーブル内のアクションボタンのデフォルト背景色も `#E0EDFF` となった。
-   テーブル内のアクションボタンのアイコン色が `text-secondary` から `text-on-secondary-container` に変更され、視認性が向上した。
-   ユーザーはセカンダリボタンをより容易に識別できるようになり、操作性が向上する。