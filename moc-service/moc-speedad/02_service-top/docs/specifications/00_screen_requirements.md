
# 画面要件定義書：SpeedAd - アンケート管理ダッシュボード

## 1. 概要

本ドキュメントは、SpeedAdサービスのアンケート管理ダッシュボード画面に関する要件を定義する。
この画面は、ユーザーがアンケートのライフサイクル全体を管理するための中心的なインターフェースとして機能する。

## 2. 画面目的

- ユーザーが自身のアカウントに関連する全てのアンケートを一覧で把握できること。
- アンケートのステータス（会期前、会期中、終了後など）を直感的に理解できること。
- 新しいアンケートを容易に作成できること。
- 既存のアンケートの詳細確認、編集、および関連データ（QRコード、回答データ）へのアクセスが迅速に行えること。
- ユーザー自身のプロファイル情報や所属グループの管理ができること。

## 3. レイアウトとレスポンシブ対応

### 3.1. 基本レイアウト

- **ヘッダー**: 画面上部に固定。ブランドロゴ、ユーザー情報、グローバルナビゲーション（テーマ切替など）を配置する。
- **サイドバー**: 画面左側に配置。主要機能へのナビゲーションリンク、グループ管理機能を提供する。
- **メインコンテンツ**: 画面中央の主要エリア。アンケート一覧と関連する操作パネルを配置する。
- **フッター**: 画面下部に配置。補足的なリンク（利用規約、プライバシーポリシー等）やコピーライト情報を表示する。

### 3.2. レスポンシブ挙動

- **デスクトップ (XL, >1280px)**: サイドバーはデフォルトで折りたたまれており（アイコンのみ表示）、ホバーすることで展開される。
- **タブレット (LG, 1024px - 1279px)**: サイドバーは常に展開された状態で表示される。
- **モバイル (<1023px)**: サイドバーはデフォルトで非表示。ヘッダーのハンバーガーメニューをタップすることで、画面左からオーバーレイとして表示される。

## 4. 機能要件

### 4.1. ヘッダー

- **4.1.1. ブランドロゴ**: クリックするとダッシュボードのトップ（本画面）に遷移する。
- **4.1.2. ユーザー表示**: ログイン中のユーザーのメールアドレスを表示する。クリックするとアカウント情報モーダルが開く。
- **4.1.3. テーマ切替**: サイドバーからライトモードとダークモードを切り替える。状態はローカルストレージに保存され、次回アクセス時も維持される。
- **4.1.4. モバイルメニューボタン**: モバイル表示時のみ表示。クリックでサイドバーを開閉する。

### 4.2. サイドバー

- **4.2.1. プロファイル表示**: ユーザーアイコン、メールアドレス、現在選択中のグループ名を表示する。
    - UXノート: ユーザーの現在のコンテキストを常に明確に表示。
- **4.2.2. グループ管理**:
    - **グループ選択ドロップダウン**: 所属するグループの一覧を表示し、選択したグループに即時切り替え。
        - UXノート: 「切替」ボタンを廃止し、選択と同時に切り替えを行うことで操作ステップを削減。
    - **グループ新規作成ボタン**: クリックでグループ作成モーダルが開く。
    - UXノート: グループ関連機能を一箇所に集約し、効率的な管理を可能にする。
- **4.2.3. ナビゲーション**:
    - **アンケート管理**:
        - **アンケート一覧**: 本画面へのリンク。
            - UXノート: 主要な機能へのアクセス。
        - **アンケート新規作成**: 新規アンケート作成モーダルを開く。
            - UXノート: 主要な機能へのアクセス。
    - **アカウント・設定**:
        - **アカウント情報**: アカウント情報モーダルを開く。
            - UXノート: ユーザー固有の設定へのアクセス。
        - **ログアウト**: ユーザーをログアウトさせる。
            - UXノート: セキュリティとセッション管理。
    - **テーマ切替**: サイドバー下部に配置され、ライトモードとダークモードを切り替える。
        - UXノート: 主要ナビゲーションとは異なる性質の機能のため、独立した配置。
    - UXノート: 主要機能とユーティリティ機能を分離し、情報構造を明確にする.

### 4.3. メインコンテンツ（アンケート一覧）

- **4.3.1. アンケート新規作成**: ボタンをクリックすると、新規アンケート作成モーダルが開く。
- **4.3.2. 検索・フィルタリング**:
    - **キーワード検索**: アンケート名を対象に、インクリメンタルサーチで一覧を絞り込む。
    - **ステータスフィルター**: ドロップダウンで特定のステータスのアンケートのみを表示する。
    - **期間フィルター**: 開始日と終了日を指定し、該当日付範囲内のアンケートを絞り込む。
- **4.3.3. アンケートテーブル**:
    - **表示項目**: アクションボタン、アンケートID、アンケート名、ステータス、回答数、展示会会期。
    - **ソート**: アンケートID、名称、ステータス、回答数、会期の各列ヘッダーをクリックすることで、昇順・降順の並び替えが可能。
    - **アクション**:
        - **編集**: アンケート編集画面へ遷移する。（現在は未実装である旨のメッセージを表示）
        - **QRコード**: アンケート回答用URLのQRコードをモーダルで表示する。
        - **アンケートの複製**: 選択したアンケートの情報を引き継ぎ、新しいアンケートを作成する。
        - **データダウンロード**: 回答データや名刺画像のダウンロードオプションをモーダルで表示する。
    - **行クリック**: テーブルの行自体をクリックすると、アンケート詳細モーダルが開く。
- **4.3.4. ページネーション**:
    - 1ページあたりの表示件数を（10, 25, 50件）から選択できる。
    - 現在の表示範囲と総件数を表示する。
    - 「前へ」「次へ」ボタンでページを移動できる。

### 4.4. モーダルウィンドウ

各モーダルは、背景をスクリム（半透明の黒）で覆い、コンテンツを中央に表示する。Escキーで閉じることができる。

- **4.4.1. 新規アンケート作成モーダル**: アンケート名、展示会会期などを入力するフォーム。
- **4.4.2. アンケート詳細モーダル**: 選択したアンケートの全ての情報を表示する。「会期前」のアンケートに限り、一部項目（アンケート名、表示タイトル、メモ、会期、プラン、名刺データ化、御礼メール設定）の編集が可能。データ化完了予定日、ダウンロード期限、見込み請求額は自動計算されるため、編集不可。データダウンロードなどのアクションボタンも含む。**また、このモーダルからアンケートの削除が可能。**
- **4.4.3. QRコードモーダル**: アンケートURLとQRコード画像を表示する。URLのコピー機能、QRコード画像のダウンロード機能を持つ。
- **4.4.4. データダウンロードモーダル**: 回答データや名刺画像のダウンロードオプション（期間、ファイル形式など）を選択するフォーム。
- **4.4.5. アカウント情報モーダル**: ユーザー自身の連絡先、請求先情報などを編集するフォーム。
- **4.4.6. グループ管理モーダル**: グループの作成・編集を行うフォーム。メンバーの招待や役割の管理もここで行う。
- **4.4.7. お問い合わせモーダル**: サービス提供者への問い合わせフォーム。

## 5. 非機能要件

- **5.1. パフォーマンス**: フィルタリング、ソート、ページネーションの各操作は、1秒以内に画面が応答すること。
- **5.2. スタイル**: デザインガイドライン（`service-top-style.css`）に準拠し、一貫性のあるUIを提供する。
- **5.3. アクセシビリティ**:
    - 主要な操作はキーボードのみで可能であること。
    - `aria-label`などを適切に設定し、スクリーンリーダーによる読み上げに対応すること。
    - `prefers-reduced-motion`を尊重し、アニメーションを無効化するオプションを提供すること。
- **5.4. バリデーション**: 全てのフォーム入力には、リアルタイム（入力時・フォーカスアウト時）および送信時にバリデーションを行い、エラーメッセージを分かりやすく表示すること。

